(this.webpackJsonpanifind=this.webpackJsonpanifind||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){},17:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(1),r=n.n(a),i=n(7),s=n.n(i),o=(n(15),n(16),n(9)),u=n(2);n(17);var l=n(6),j=n.n(l),f=n(8);function h(){return(h=Object(f.a)(j.a.mark((function e(t){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://malendar.herokuapp.com/v3/search/anime",n="?q=".concat(t),e.next=4,fetch("".concat("https://malendar.herokuapp.com/v3/search/anime").concat(n)).then((function(e){return e.json()})).then((function(e){return e.results})).catch((function(e){return console.error(e),[]}));case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0=[];case 7:return c=e.t0,e.abrupt("return",c.slice(0,5));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(19);var b=function(e){var t=e.anime,n=e.action,a=e.history;return Object(c.jsxs)("div",{className:"Anime-item ".concat(a),onClick:function(e){return n(e,t)||null},onKeyDown:function(e){return n(e,t)||null},role:"button",tabIndex:0,title:a?"\u041d\u0430\u0436\u043c\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0443\u0434\u0430\u043b\u0438\u0442\u044c":"\u041d\u0430\u0436\u043c\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0441\u043f\u0438\u0441\u043e\u043a",children:[Object(c.jsx)("img",{alt:"\u041e\u0431\u043b\u043e\u0436\u043a\u0430 \u0442\u0430\u0439\u0442\u043b\u0430",src:t.image_url||"",className:"Anime-img"}),Object(c.jsx)("p",{className:"Anime-title",children:t.title||""})]},t.mal_id||"")},d=r.a.memo(b),m=function(e){var t=e.anime,n=e.action,a=e.history,r=[];try{r=t.map((function(e){return Object(c.jsx)("li",{children:Object(c.jsx)(d,{anime:e,action:n||null,history:a})},"li_".concat(e.mal_id||""))}))}catch(i){return console.error(i),null}return Object(c.jsx)("ul",{className:"Anime",children:r})},O=r.a.memo(m);var p=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(""),s=Object(u.a)(i,2),l=s[0],j=s[1],f=Object(a.useState)([]),b=Object(u.a)(f,2),d=b[0],m=b[1],p=Object(a.useState)([]),v=Object(u.a)(p,2),x=v[0],g=v[1],S=Object(a.useState)([]),y=Object(u.a)(S,2),N=y[0],w=y[1],k=Object(a.useState)([]),E=Object(u.a)(k,2),A=E[0],C=E[1],L=function(e){var t=Object(a.useState)((function(){return localStorage.getItem(e)})),n=Object(u.a)(t,2),c=n[0],r=n[1];return Object(a.useEffect)((function(){var t=function(t){t.storageArea===localStorage&&t.key===e&&r(t.newValue)};return window.addEventListener("storage",t),function(){window.removeEventListener("storage",t)}})),Object(a.useEffect)((function(){try{localStorage.setItem(e,c)}catch(t){console.log(t)}}),[e,c]),[c,r]}("history"),_=Object(u.a)(L,2),F=_[0],I=_[1],J=function(e,t){var n=Object(a.useState)(e),c=Object(u.a)(n,2),r=c[0],i=c[1];return Object(a.useEffect)((function(){var n=setTimeout((function(){i(e)}),t);return function(){clearTimeout(n)}}),[e]),r}(l,900),P=function(){var e=Object(a.useRef)(!1);return Object(a.useEffect)((function(){e.current=!0}),[]),function(){return e.current}}();Object(a.useEffect)((function(){P()&&C(JSON.parse(F)),J&&J.length>2&&(r(!0),N.find((function(e){return e.toLowerCase().includes(J.toLowerCase())}))?g(A.filter((function(e){return e.title.toLowerCase().includes(J.toLowerCase())}))):g([]),function(e){return h.apply(this,arguments)}(J).then((function(e){r(!1),m(e)})))}),[J]),Object(a.useEffect)((function(){A&&(I(JSON.stringify(A)),w(A.map((function(e){return e.title}))))}),[A]);return Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"Search-container",children:[Object(c.jsx)("input",{"aria-label":"\u041f\u043e\u0438\u0441\u043a\u043e\u0432\u043e\u0435 \u043f\u043e\u043b\u0435",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, ".concat(N[0]||"pupa"," "),className:"Search",onChange:function(e){return j(e.target.value)}}),n&&Object(c.jsx)("div",{children:"\u041f\u043e\u0438\u0441\u043a..."}),!n&&0===d.length&&l&&Object(c.jsx)("div",{children:"\u041f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443, \u043f\u043e\u0445\u043e\u0436\u0435, \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e :("})]}),0!==x.length&&l&&Object(c.jsxs)("div",{className:"Search-history",children:[Object(c.jsx)("h5",{className:"Search-lastSearch",children:"\u0418\u0437 \u0438\u0441\u0442\u043e\u0440\u0438\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432"}),Object(c.jsx)(O,{anime:x})]}),d&&l&&Object(c.jsx)(O,{anime:d,action:function(e,t){"Enter"!==e.key&&void 0!==e.key||(e.stopPropagation(),A.includes(t)||C([t].concat(Object(o.a)(A))))}}),A&&A.length>0&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h2",{className:"Search-lastSearch",children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432"}),Object(c.jsx)(O,{anime:A.slice(0,5),action:function(e,t){"Enter"!==e.key&&void 0!==e.key||(e.stopPropagation(),C(A.filter((function(e){return e.mal_id!==t.mal_id}))))},history:"history"})]})]})};var v=function(){return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)("header",{className:"App-header",children:Object(c.jsx)("a",{"aria-label":"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",className:"App-header__logo",href:"/anifind/",children:"anifind"})}),Object(c.jsx)("main",{className:"App-main",children:Object(c.jsx)(p,{})})]})},x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,21)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))};s.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(v,{})}),document.getElementById("root")),x()}},[[20,1,2]]]);
//# sourceMappingURL=main.219a16f4.chunk.js.map